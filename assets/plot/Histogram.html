<!DOCTYPE html>
<html>

<head>
	<!-- Load plotly.js into the DOM -->
	<script src='https://cdn.plot.ly/plotly-2.27.0.min.js'></script>
	<script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>
	<div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>

    <script>
	d3.csv('Data/metrics_hist.csv')
		.then(
		function(rows){
		function unpack(rows, key) {
			return rows.map(function(row) { return row[key]; });
		}

		var button_layer_2_height = 1.2
		var size = unpack(rows, 'metrics_by_size').map(x => parseFloat(x))
		var popularity = unpack(rows, 'metrics_by_popularity').map(x => parseFloat(x))

		var data = [{
			x: size,
			type: 'histogram',
			name: 'size',
			marker: {color: '#33CFA5'}
		  },
		  {
			x: popularity,
			type: 'histogram',
			name: 'popularity',
			line: {color: '#33CFA5'},
			visible: false
		  },
		]

		var updatemenus=[
			{
				buttons: [
					{
						args: [{'visible': [true, false]},
							   {'title': 'Distribution of the breweries based on size metrics'}],
						label: 'size',
						method: 'update'
					},
<!--					{-->
<!--						args: [{'visible': [false, true]},-->
<!--							   {'title': 'Distribution of the breweries based on popularity metrics'}],-->
<!--						label: 'popularity',-->
<!--						method: 'update'-->
<!--					},-->
<!--					{-->
<!--						args: [{'visible': [true, true]},-->
<!--							   {'title': 'Distribution of breweries on both size and popularity metrics'}],-->
<!--						label: 'Both',-->
<!--						method: 'update'-->
<!--					},-->
				],
				direction: 'left',
				pad: {'r': 30, 't': 20},
				showactive: true,
				type: 'buttons',
				x: 0.1,
				xanchor: 'left',
				y: button_layer_2_height,
				yanchor: 'top'
			},

		]

		var layout = {
			title: 'Distribution by year',
			updatemenus: updatemenus,
			showlegend: true
		}


		Plotly.newPlot("myDiv", data, layout);

		});
    </script>
</body>
</html>


